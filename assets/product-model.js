'use strict';Station.Theme=Station.Theme||{},Station.Theme.ProductModel=function(){var modelJsonSections={},models={},xrButtons={},selectors_sectionById=function(id){return'#shopify-section-'.concat(id)},selectors_productMediaTypeModel='[data-product-media-type-model]',selectors_mediaGroup='[data-product-single-media-group]',selectors_xrButton='[data-shopify-xr]',selectors_modelViewer='.model-viewer',selectors_jsonModelById=function(id){return'#ModelJson-'.concat(id)},attributes_mediaId='data-media-id',attributes_modelId='data-model-id';function setupShopifyXr(errors){if(!errors)if(window.ShopifyXR){for(var sectionId in modelJsonSections)if(modelJsonSections.hasOwnProperty(sectionId)){var modelSection=modelJsonSections[sectionId];if(modelSection.loaded)continue;var modelJson=document.querySelector(selectors_jsonModelById(sectionId));window.ShopifyXR.addModels(JSON.parse(modelJson.innerHTML)),modelSection.loaded=!0}window.ShopifyXR.setupXRElements()}else document.addEventListener('shopify_xr_initialized',(function(){setupShopifyXr()}))}function setupModelViewerUi(errors){if(!errors)for(var key in models)if(models.hasOwnProperty(key)){var model=models[key];model.modelViewerUi||(model.modelViewerUi=new Shopify.ModelViewerUI(model.element)),setupModelViewerListeners(model)}}function setupModelViewerListeners(model){var xrButton=xrButtons[model.sectionId];model.container.addEventListener('mediaVisible',(function(evt){xrButton.element.setAttribute('data-shopify-model3d-id',model.modelId),evt.detail.swiper.allowTouchMove=!1})),model.container.addEventListener('mediaHidden',(function(evt){xrButton.element.setAttribute('data-shopify-model3d-id',xrButton.defaultId),evt.detail.swiper.allowTouchMove=!0}))}return{init:function(sectionId){var modelViewerContainers=document.querySelector(selectors_sectionById(sectionId)).querySelectorAll(selectors_productMediaTypeModel);modelViewerContainers.length<1||(modelJsonSections[sectionId]={loaded:!1},modelViewerContainers.forEach((function(modelViewerContainer,index){var mediaId=modelViewerContainer.getAttribute(attributes_mediaId),modelViewerElement=modelViewerContainer.querySelector(selectors_modelViewer),modelId=modelViewerElement.getAttribute(attributes_modelId);if(0===index){var xrButton=modelViewerContainer.closest(selectors_mediaGroup).querySelector(selectors_xrButton);xrButtons[sectionId]={element:xrButton,defaultId:modelId}}models[mediaId]={modelId:modelId,sectionId:sectionId,container:modelViewerContainer,element:modelViewerElement}})),window.Shopify.loadFeatures([{name:'shopify-xr',version:'1.0',onLoad:setupShopifyXr},{name:'model-viewer-ui',version:'1.0',onLoad:setupModelViewerUi}]))},removeSectionModels:function(sectionId){for(var key in models){if(models.hasOwnProperty(key))models[key].sectionId===sectionId&&(models[key].modelViewerUi.destroy(),delete models[key])}delete modelJsonSections[sectionId]}}}();