{%- assign current = false -%}
{%- assign menu_item_class = 'nav-item' -%}

{% unless link_url %}
  {%- assign link_url = link.url -%}
{% endunless %}

{% if template == 'index' and link_url == '/' %}
  {%- assign current = true -%}
{% elsif collection.url == link_url %}
  {%- assign current = true -%}
{% elsif blog.url == link_url %}
  {%- assign current = true -%}
{% elsif page.url == link_url %}
  {%- assign current = true -%}
{% elsif page_title == link.title %}
  {%- assign current = true -%}
{% elsif template == 'cart' and link_url == '/cart' %}
  {%- assign current = true -%}
{% elsif template == 'customers/login' and link_url == '/account/login' %}
  {%- assign current = true -%}
{% elsif template == 'list-collections' and link_url == '/collections' %}
  {%- assign current = true -%}
{% elsif page_title == 'Products' and link_url == '/collections/all' %}
  {%- assign current = true -%}
{% elsif template == 'article' and link_url == article.url %}
  {%- assign current = true -%}
{% endif %}

{% if current %}
  {%- assign menu_item_class = menu_item_class | append: ' nav-active' -%}
{% endif %}

{% assign link_url = null %}